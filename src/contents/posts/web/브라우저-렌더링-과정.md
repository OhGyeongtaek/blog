---
slug: "브라우저-렌더링-과정"
date: "2022.04.06"
title: "[WEB] 브라우저 렌더링 과정"
description: "[Web] 브라우저 렌더링 과정에 대해 이해할 수 있다."
category: "Web"
---

오늘은 프론트엔드 개발자로 면접 때 반드시 나오는 질문인 브라우저 렌더링 과정에 대해 알아보겠습니다.

# 브라우저 렌더링 과정

1. 브라우저 렌더링 엔진이 HTML과 CSS를 파싱하여 돔트리와 CSSOM을 생성합니다.
2. 돔 트리와 cssom을 결합하여 노드의 컨텐츠와 스타일 정보를 포함하는 렌더트리가 생성되게 됩니다.
3. 렌더트리가 생성되면 레이아웃 과정을 통해 뷰포트 내에서 요소들의 정확한 위치, 크기를 계산합니다.
4. 레이아웃 과정을 통해 각 노드들이 어떻게 생겼고, 어디에 위치하는지 알게되면 화면에 그려지게 되는데 이 과정을 페인트과정이라고 합니다.

## 렌더트리가 만들어지는 과정이 어떻게 되나요?

랜더트리가 만들어지는 과정을 대략적으로 설명드리자면 도큐먼트 객체에서 각 노드를 순회하면서 각 노드에 맞는 cssom에서 찾아 규칙을 적용합니다.

## Reflow 최적화를 하는 이유

DOM노드의 레이아웃 수치가 변경될 경우 렌더트리가 재생성 되어 reflow와 repaint 과정이 다시 일어나기 때문입니다.

## Reflow가 일어나는 대표적인 예시

1. 페이지 초기 렌더링 시
2. 브라우저 리사이징 시
3. 노드 추가 또는 제거
4. 요소의 위치, 크기 변경
5. 폰트 변경과 이미지 크기 변경

## css animation을 이용하는 이유

레이아웃, 레이어, 페인트 과정을 모두 건너고 composite 의 과정만 거치게 되는 이유가 있다.

## repaint가 일어나기 위해서는 꼭 reflow가 발생해야 하나요?

아뇨. repaint는 요소의 background, visibility, opacity가 변경되었을 경우 repaint만 실행

## 브라우저 랜더링 최적화 하는 방법

### Reflow, Repaint 최소화

Reflow, Repaint 일어날 경우 브라우저가 다시 랜더트리부터 생성해서 노드들의 위치, 크기 등을 재계산하고, 적용된 스타일에 맞게 화면에 그려져야 하는데 Reflow, Repaint이 많이 일어날 경우 사이트가 느려질 수 밖에 없다.

### 프레임 최소화 하기

Javascript로 애니메이션을 구현할 때 0.1초 마다 1px이동하는 것 보다 0.3초마다 3px 이동하는 것이 훨씬 더 효율적이다.
0.1초씩 1px을 이동하면 0.1초 마다 reflow가 일어나게 된다.
그런 반면에 0.3초 마다 이동 할 경우 전자보다 연산량이 3배가 줄어든다.

### 영향을 주는 노드 최소화하기

애니메이션이나 레이아웃 변화가 많은 요소의 경우 position을 absolute나 fixed를 사용하면 영향을 받는 주변 노드들을 줄일 수 있다.

---

# 참조

- [브라우저 렌더링 과정과 최적화 방법](https://velog.io/@wiostz98kr/%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80-%EB%A0%8C%EB%8D%94%EB%A7%81-%EA%B3%BC%EC%A0%95%EA%B3%BC-%EC%B5%9C%EC%A0%81%ED%99%94-%EB%B0%A9%EB%B2%95)
